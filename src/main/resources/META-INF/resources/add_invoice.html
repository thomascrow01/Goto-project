<!DOCTYPE html>
<html lang="en">

<head>
  <title>GoTo Grocery Online</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link href="styles/main.css" rel="stylesheet"/>
  <link href="styles/responsive.css" rel="stylesheet" media="screen and (max-width:1024px)"/>

  <!-- References to external font 'Love Ya Like A Sister' -->
  <link href='http://fonts.googleapis.com/css?family=Love+Ya+Like+A+Sister' rel='stylesheet'/>

  <!-- Load AngularJS -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  <script type="text/javascript">
      var app = angular.module("ProductManagement", []);

      //Controller Part
      app.controller("ProductManagementController", function ($scope, $http) {

          const queryString = window.location.search;
          const urlParams = new URLSearchParams(queryString);

          //Initialize page with default data which is blank in this example
          $scope.products = [];

          $scope.form = {
          id: -1,
          ProductName: "",
          ProductDesc: ""
          };

          //Now load the data from server
          _refreshPageData();

          //HTTP POST/PUT methods for add/edit products
          $scope.update = function () {
              var method = "";
              var url = "";
              var data = {};
              if ($scope.form.id == -1) {
                  //Id is absent so add products - POST operation
                  method = "POST";
                  url = '/entity/product';
                  data.name = $scope.form.ProductName;
                  data.description = $scope.form.ProductDesc;
                  
              } else {
                  //If Id is present, it's edit operation - PUT operation
                  method = "PUT";
                  url = '/entity/product/' + $scope.form.id;
                  data.name = $scope.form.ProductName;
                  data.description = $scope.form.ProductDesc;
              }

              $http({
                  method: method,
                  url: url,
                  data: angular.toJson(data),
                  headers: {
                  'Content-Type': 'application/json'
                  }
              }).then(_success, _error);
          };

          //HTTP DELETE- delete product by id
          $scope.remove = function (product) {
              $http({
                  method: 'DELETE',
                  url: '/entity/product/' + product.id
              }).then(_success, _error);
          };

          //In case of edit products, populate form with product data
          $scope.edit = function (product) {
              $scope.form.id = product.id;
              $scope.form.ProductName = product.name;
              $scope.form.ProductDesc = product.description
          };

          /* Private Methods */
          //HTTP GET- get all products collection
          function _refreshPageData() {

              var endpointValue = '/entity/product/';
              if( urlParams.get('email') !== null ){
                  endpointValue = '/entity/product/name=' + urlParams.get('name');
              }

              $http({
                  method: 'GET',
                  url: endpointValue
              }).then(function successCallback(response) {
                  $scope.products = response.data;
              }, function errorCallback(response) {
                  console.log(response.statusText);
              });
          }

          function _success(response) {
              _refreshPageData();
              _clearForm()
          }

          function _error(response) {
              alert(response.data.message || response.statusText);
          }

          //Clear the form
          function _clearForm() {
              $scope.form.ProductDesc = "";
              $scope.form.ProductName = "";
              $scope.form.id = -1;
          }
      });
  </script>

  <!-- Load AngularJS -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  <script type="text/javascript">
    var app = angular.module("MemberManagement", []);

      //Controller Part
      app.controller("MemberManagementController", function ($scope, $http) {


        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);

        //Initialize page with default data which is blank in this example
        $scope.members = [];

        $scope.form = {
          id: -1,
          name: "",
          address: "",
          mobile: "",
          email: ""
        };

        //Now load the data from server
        _refreshPageData();

        //HTTP POST/PUT methods for add/edit members
        $scope.update = function () {
          var method = "";
          var url = "";
          var data = {};
          if ($scope.form.id == -1) {
            //Id is absent so add members - POST operation
            method = "POST";
            url = '/entity/member';
            data.name = $scope.form.name;
            data.address = $scope.form.address;
            data.mobile = $scope.form.mobile;
            data.email = $scope.form.email;
            
          } else {
            //If Id is present, it's edit operation - PUT operation
            method = "PUT";
            url = '/entity/member/' + $scope.form.id;
            data.name = $scope.form.name;
            data.address = $scope.form.address;
            data.mobile = $scope.form.mobile;
            data.email = $scope.form.email;
          }

          $http({
            method: method,
            url: url,
            data: angular.toJson(data),
            headers: {
              'Content-Type': 'application/json'
            }
          }).then(_success, _error);
        };

        //HTTP DELETE- delete member by id
        $scope.remove = function (member) {
          if(window.confirm("Are you sure you want to delete " + member.name + "?")){
          $http({
            method: 'DELETE',
            url: '/entity/member/' + member.id
          }).then(_success, _error);
        }
        };

        //In case of edit members, populate form with member data
        $scope.edit = function (member) {
          $scope.form.id = member.id;
          $scope.form.name = member.name;
          $scope.form.address = member.address;
          $scope.form.mobile = member.mobile;
          $scope.form.email = member.email;
        };

          /* Private Methods */
        //HTTP GET- get all members collection
        function _refreshPageData() {

          var endpointValue = '/entity/member/';
          if( urlParams.get('email') !== null ){
            endpointValue = '/entity/member/email=' + urlParams.get('email');
          }
          if( urlParams.get('mobile') !== null ){
            endpointValue = '/entity/member/mobile=' + urlParams.get('mobile');
          }
          if( urlParams.get('name') !== null ){
            endpointValue = '/entity/member/name=' + urlParams.get('name');
          }

          $http({
            method: 'GET',
            url: endpointValue
          }).then(function successCallback(response) {
            $scope.members = response.data;
          }, function errorCallback(response) {
            console.log(response.statusText);
          });
        }

        function _success(response) {
          _refreshPageData();
          _clearForm()
        }

        function _error(response) {
          alert(response.data.message || response.statusText);
        }

        //Clear the form
        function _clearForm() {
          $scope.form.email = "";
          $scope.form.mobile = "";
          $scope.form.address = "";
          $scope.form.name = "";
          $scope.form.id = -1;
        }
      });
    </script>

        
</head>

<body>
<article>
<header><h1><a href="index.html" id="home">Welcome to GoTo Grocery Online</a></h1></header>
<nav>
  <nav>
    <ul>
      <li><a href="add_member.html">Add Member</a></li>
      <li><a href="view_member.html">View Members</a></li>
      <li><a href="add_product.html">Add Product</a></li>
      <li><a href="view_product.html">View Products</a></li>
      <li><a class="active" href="add_invoice.html">Add Invoice</a></li>
      <li><a href="view_invoice.html">View Invoice</a></li>
    </ul>
  </nav>
</nav>

<section id="section1">
  <img src="images/invoice.png" alt="order now"/> <br />
  
  <div class="row">
     <div class="col-25"><label for="orderdate">Invoice Date <label for="order_date"> <label for="orderdate"><span style="color: #ff0000;">*</span></label>:</label></label></div>
     <div class="col-75"><input id="orderdate" maxlength="25" name="orderdate" pattern="[a-z]{1,25}" required="required" size="10" type="date" /></div>
  </div>
  <div class="row">
    <div class="col-25"><label for="membername">Member (ID)<label for="memberename"> <label for="membername"><span style="color: #ff0000;">*</span></label>:</label></label></div>
    <div class="col-75">
     <select id="memberename" ng-app="MemberManagement" ng-controller="MemberManagementController">
       <option ng-repeat="member in members">{{ member.name }} ( ID: {{ member.id }} )</option>
     </select>
    </div>
 </div>
  <!-- <div class="row">
     <div class="col-25"><label for="memberid">Member ID <label for="memberid"> <label for="memberid"><span style="color: #ff0000;">*</span></label>:</label></label></div>
     <div class="col-75"><input id="memberid" maxlength="25" name="memberid" pattern="[a-z]{1,25}" required="required" size="10" type="text" disabled /></div>
  </div> -->
  
<br><div class="col-75"><input type="submit" value="Submit" /></div>
</section>

<section id="section4">
<table>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">Item#</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">
    <p><span style="white-space: normal;">Product ID</span></p>
    </td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;">
    <p><span style="white-space: normal;">Product Name</span></p>
    </td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">Qty</span></p>
    </td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">Price</span></p>
    </td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">Total</span></p>
    </td>
    
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">1</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>

    <td nowrap="nowrap" style="width: 143px; height: 21px;">
      <span style="white-space: normal;">
        <select id="memberename" ng-app="ProductManagement" ng-controller="ProductManagementController">
          <option ng-repeat="product in products">{{ product.name }}</option>
        </select>
      </span>
    </td>

    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty1" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">2</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr2" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty2" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">3</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr3" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty3" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">4</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr4" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty4" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;">$0.00</span></td>
   
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">5</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr5" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty5" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">6</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr6" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty6" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">7</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr7" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty8" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">8</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr8" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty9" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">9</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">0</td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;"><span style="white-space: normal;"><input name="ItemDescr9" size="50" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;"><span style="white-space: normal;"><input name="Qty9" size="6" type="text" /></span></td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">$0.00</span></td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    </td>
  </tr>
  <tr>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">10</span></p>
    </td>
    <td nowrap="nowrap" style="width: 76px; height: 21px;">
    <p>0</p>
    </td>
    <td nowrap="nowrap" style="width: 143px; height: 21px;">
    <p><span style="white-space: normal;"><input name="ItemDescr10" size="50" type="text" /></span></p>
    </td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;"><input name="Qty10" size="6" type="text" /></span></p>
    </td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    <td nowrap="nowrap" style="width: 64px; height: 21px;">
    <p><span style="white-space: normal;">$0.00</span></p>
    </td>
    
    <p>&nbsp;</p>
    </td>
  </tr>
  <tr>
    <td id="overallTotalRow"></td>
    <td id="overallTotalRow"></td>
    <td id="overallTotalRow"></td>
    <td id="overallTotalRow"></td>
    <td id="overallTotal">Overall Total:</td>
    <td nowrap="nowrap" style="width: 64px; height: 21px;">$0.00</td>
    
    <p>&nbsp;</p>
    </td>
  </tr>

</table>

</section>

<footer>
  <h3><a href="introduction.html">Home</a> </h3>
</footer>

</article>
</body>
</html>